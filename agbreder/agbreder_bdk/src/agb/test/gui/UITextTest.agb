
class UITextTest do

	static this main () do
		UITextTest.test1()
		return this
	end
	
	static this test1 () do
		do
			UIText c = new UIText().setFont(new UIFontTest())
			Assert.equal("", c.getText())
			Assert.equal(0, c.getCursor())
			do
				c.fireKeyDownEvent(new UIKeyEvent().setCode(Native.SDLK_LEFT()))
				Assert.equal("", c.getText())
				Assert.equal(0, c.getCursor())
				c.fireKeyDownEvent(new UIKeyEvent().setCode(Native.SDLK_RIGHT()))
				Assert.equal("", c.getText())
				Assert.equal(0, c.getCursor())
				c.fireKeyDownEvent(new UIKeyEvent().setCode(Native.SDLK_DELETE()))
				Assert.equal("", c.getText())
				Assert.equal(0, c.getCursor())
				c.fireKeyDownEvent(new UIKeyEvent().setCode(Native.SDLK_BACKSPACE()))
				Assert.equal("", c.getText())
				Assert.equal(0, c.getCursor())
			end
			do
				c.fireKeyDownEvent(new UIKeyEvent().setCode(Native.SDLK_SPACE()))
				Assert.equal(" ", c.getText())
				Assert.equal(1, c.getCursor())
				c.fireKeyDownEvent(new UIKeyEvent().setCode(Native.SDLK_BACKSPACE()))
				Assert.equal("", c.getText())
				Assert.equal(0, c.getCursor())
				c.fireKeyDownEvent(new UIKeyEvent().setCode(Native.SDLK_BACKSPACE()))
				Assert.equal("", c.getText())
				Assert.equal(0, c.getCursor())
			end
			do
				c.fireKeyDownEvent(new UIKeyEvent().setCode(Native.SDLK_SPACE()))
				Assert.equal(" ", c.getText())
				Assert.equal(1, c.getCursor())
				c.fireKeyDownEvent(new UIKeyEvent().setCode(Native.SDLK_LEFT()))
				Assert.equal(" ", c.getText())
				Assert.equal(0, c.getCursor())
				c.fireKeyDownEvent(new UIKeyEvent().setCode(Native.SDLK_LEFT()))
				Assert.equal(" ", c.getText())
				Assert.equal(0, c.getCursor())
				c.fireKeyDownEvent(new UIKeyEvent().setCode(Native.SDLK_DELETE()))
				Assert.equal("", c.getText())
				Assert.equal(0, c.getCursor())
			end
			do
				c.fireKeyDownEvent(new UIKeyEvent().setCode(Native.SDLK_SPACE()))
				Assert.equal(" ", c.getText())
				Assert.equal(1, c.getCursor())
				c.fireKeyDownEvent(new UIKeyEvent().setCode(Native.SDLK_SPACE()))
				Assert.equal("  ", c.getText())
				Assert.equal(2, c.getCursor())
				c.fireKeyDownEvent(new UIKeyEvent().setCode(Native.SDLK_BACKSPACE()))
				Assert.equal(" ", c.getText())
				Assert.equal(1, c.getCursor())
				c.fireKeyDownEvent(new UIKeyEvent().setCode(Native.SDLK_BACKSPACE()))
				Assert.equal("", c.getText())
				Assert.equal(0, c.getCursor())
				c.fireKeyDownEvent(new UIKeyEvent().setCode(Native.SDLK_DELETE()))
				Assert.equal("", c.getText())
				Assert.equal(0, c.getCursor())
			end
			do
				c.fireKeyDownEvent(new UIKeyEvent().setCode(Native.SDLK_SPACE()))
				Assert.equal(" ", c.getText())
				Assert.equal(1, c.getCursor())
				c.fireKeyDownEvent(new UIKeyEvent().setCode(Native.SDLK_SPACE()))
				Assert.equal("  ", c.getText())
				Assert.equal(2, c.getCursor())
				c.fireKeyDownEvent(new UIKeyEvent().setCode(Native.SDLK_LEFT()))
				Assert.equal("  ", c.getText())
				Assert.equal(1, c.getCursor())
				c.fireKeyDownEvent(new UIKeyEvent().setCode(Native.SDLK_LEFT()))
				Assert.equal("  ", c.getText())
				Assert.equal(0, c.getCursor())
				c.fireKeyDownEvent(new UIKeyEvent().setCode(Native.SDLK_DELETE()))
				Assert.equal(" ", c.getText())
				Assert.equal(0, c.getCursor())
				c.fireKeyDownEvent(new UIKeyEvent().setCode(Native.SDLK_DELETE()))
				Assert.equal("", c.getText())
				Assert.equal(0, c.getCursor())
			end
			do
				c.fireKeyDownEvent(new UIKeyEvent().setCode(Native.SDLK_SPACE()))
				Assert.equal(" ", c.getText())
				Assert.equal(1, c.getCursor())
				c.fireKeyDownEvent(new UIKeyEvent().setCode(Native.SDLK_SPACE()))
				Assert.equal("  ", c.getText())
				Assert.equal(2, c.getCursor())
				c.fireKeyDownEvent(new UIKeyEvent().setCode(Native.SDLK_RIGHT()))
				Assert.equal("  ", c.getText())
				Assert.equal(2, c.getCursor())
				c.fireKeyDownEvent(new UIKeyEvent().setCode(Native.SDLK_LEFT()))
				Assert.equal("  ", c.getText())
				Assert.equal(1, c.getCursor())
				c.fireKeyDownEvent(new UIKeyEvent().setCode(Native.SDLK_LEFT()))
				Assert.equal("  ", c.getText())
				Assert.equal(0, c.getCursor())
				c.fireKeyDownEvent(new UIKeyEvent().setCode(Native.SDLK_RIGHT()))
				Assert.equal("  ", c.getText())
				Assert.equal(1, c.getCursor())
				c.fireKeyDownEvent(new UIKeyEvent().setCode(Native.SDLK_RIGHT()))
				Assert.equal("  ", c.getText())
				Assert.equal(2, c.getCursor())
				c.fireKeyDownEvent(new UIKeyEvent().setCode(Native.SDLK_BACKSPACE()))
				Assert.equal(" ", c.getText())
				Assert.equal(1, c.getCursor())
				c.fireKeyDownEvent(new UIKeyEvent().setCode(Native.SDLK_BACKSPACE()))
				Assert.equal("", c.getText())
				Assert.equal(0, c.getCursor())
			end
			do
				c.fireKeyDownEvent(new UIKeyEvent().setCode(97))
				Assert.equal("a", c.getText())
				Assert.equal(1, c.getCursor())
				c.fireKeyDownEvent(new UIKeyEvent().setCode(98))
				Assert.equal("ab", c.getText())
				Assert.equal(2, c.getCursor())
				c.fireKeyDownEvent(new UIKeyEvent().setCode(Native.SDLK_SPACE()))
				Assert.equal("ab ", c.getText())
				Assert.equal(3, c.getCursor())
				c.fireKeyDownEvent(new UIKeyEvent().setCode(99))
				Assert.equal("ab c", c.getText())
				Assert.equal(4, c.getCursor())
				c.fireKeyDownEvent(new UIKeyEvent().setCode(Native.SDLK_RIGHT()))
				Assert.equal("ab c", c.getText())
				Assert.equal(4, c.getCursor())
				c.fireKeyDownEvent(new UIKeyEvent().setCode(Native.SDLK_LEFT()))
				Assert.equal("ab c", c.getText())
				Assert.equal(3, c.getCursor())
				c.fireKeyDownEvent(new UIKeyEvent().setCode(Native.SDLK_BACKSPACE()))
				Assert.equal("abc", c.getText())
				Assert.equal(2, c.getCursor())
				c.fireKeyDownEvent(new UIKeyEvent().setCode(Native.SDLK_BACKSPACE()))
				Assert.equal("ac", c.getText())
				Assert.equal(1, c.getCursor())
				c.fireKeyDownEvent(new UIKeyEvent().setCode(Native.SDLK_BACKSPACE()))
				Assert.equal("c", c.getText())
				Assert.equal(0, c.getCursor())
				c.fireKeyDownEvent(new UIKeyEvent().setCode(Native.SDLK_DELETE()))
				Assert.equal("", c.getText())
				Assert.equal(0, c.getCursor())
			end
		end
		return this
	end
	
end
